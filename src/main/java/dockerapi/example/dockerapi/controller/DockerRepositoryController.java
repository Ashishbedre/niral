package dockerapi.example.dockerapi.controller;

import dockerapi.example.dockerapi.service.DockerRepositoryService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class DockerRepositoryController {

    @Autowired
    private DockerRepositoryService repositoryService;

    @PostMapping("/fetchAndSaveRepositories")
    public void fetchAndSaveRepositories() {
        // Replace the apiUrl and bearerToken with your actual values
        String apiUrl = "https://hub.docker.com/v2/namespaces/ashishbedre/repositories";
        String bearerToken = "eyJ4NWMiOlsiTUlJQytUQ0NBcCtnQXdJQkFnSUJBREFLQmdncWhrak9QUVFEQWpCR01VUXdRZ1lEVlFRREV6dFNUVWxHT2xGTVJqUTZRMGRRTXpwUk1rVmFPbEZJUkVJNlZFZEZWVHBWU0ZWTU9rWk1WalE2UjBkV1dqcEJOVlJIT2xSTE5GTTZVVXhJU1RBZUZ3MHlNekF4TURZd05ESTNORFJhRncweU5EQXhNall3TkRJM05EUmFNRVl4UkRCQ0JnTlZCQU1UTzBORFZVWTZTalZITmpwRlExTkVPa05XUkVjNlZEZE1NanBLV2taUk9sTk5NMFE2V0ZsUE5EcFdOME5IT2tkR1YwSTZXbG8xTmpvMFZVUkRNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXpOMGIwajdVeVwvYXNqWVhXaDJnM3FvNkpoT2tBalhXQVVCY3NIdTZoWVpSRkw5dmU4MTNUQjRjbDhRa3hDSTRjVWdHR25HV1hWeEgydTV2RXR4U09xV0JyeFNOcmhTTWpcL1ZPKzZcL2lZKzhtRkZhMEdieXMxd1Q1YzZWOXFkTmhEYlRjcEF1WEoxUjRiS3UrdVRqVUtFSGF5akhSOUxQRHlHZ1BcL25tQVp2Tk9YR21yU1NKRkk2eEU2ZjdBXC8rOVptcWgyVlRaQlc0cXduSnF0cnNJM2NveDNQczMwS2MrYUh3V3VZdk5RdFNBdytqVXhDVVFoRWZGa0lKSzh6OVdsXC9RY3RPRHBHVHlzbVRwYzc2WlRHSllrZ2hoRkxSRDJiUE5RRDhFNWVnSmtkUDl4aWlubFRsdzIwcVpYVUZpanVhQXJ3TkdMSW1CRFhNMFpSNWM1bVN2d0lEQVFBQm80R3lNSUd2TUE0R0ExVWREd0VCXC93UUVBd0lIZ0RBUEJnTlZIU1VFQ0RBR0JnUlZIU1VBTUVRR0ExVWREZ1E5QkR0RFExVkdPa28xUnpZNlJVTlRSRHBEVmtSSE9sUTNUREk2U2xwR1VUcFRUVE5FT2xoWlR6UTZWamREUnpwSFJsZENPbHBhTlRZNk5GVkVRekJHQmdOVkhTTUVQekE5Z0R0U1RVbEdPbEZNUmpRNlEwZFFNenBSTWtWYU9sRklSRUk2VkVkRlZUcFZTRlZNT2taTVZqUTZSMGRXV2pwQk5WUkhPbFJMTkZNNlVVeElTVEFLQmdncWhrak9QUVFEQWdOSUFEQkZBaUVBbVE0eGxBdldWUCtPXC9hNlhDU05pYUFYRU1Bb1RQVFRYRWJYMks2RVU4ZTBDSUg0QTAwSVhtUndjdGtEOHlYNzdkTVoyK0pEY1FGdDFxRktMZFR5SnVzT1UiXSwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ.eyJhdWQiOlsiaHR0cHM6XC9cL2h1Yi5kb2NrZXIuY29tIl0sImp0aSI6IjhkN2QxYzU5LWRmYjAtNGU1MS05NmU3LTc2Y2FiMzBlZjMyOSIsInVzZXJfaWQiOiJkODc5ZTI3YTdiMjE0ZDhkODA1OWI2Njg5NmE0ODg0ZCIsInNlc3Npb25faWQiOiI4ZDdkMWM1OS1kZmIwLTRlNTEtOTZlNy03NmNhYjMwZWYzMjkiLCJpYXQiOjE3MDQ3MTU5MDgsInNvdXJjZSI6eyJpZCI6ImQ4NzllMjdhLTdiMjEtNGQ4ZC04MDU5LWI2Njg5NmE0ODg0ZCIsInR5cGUiOiJwd2QifSwic3ViIjoiZDg3OWUyN2E3YjIxNGQ4ZDgwNTliNjY4OTZhNDg4NGQiLCJleHAiOjE3MDczMDc5MDgsImh0dHBzOlwvXC9odWIuZG9ja2VyLmNvbSI6eyJzb3VyY2UiOiJkb2NrZXJfcHdkfGQ4NzllMjdhLTdiMjEtNGQ4ZC04MDU5LWI2Njg5NmE0ODg0ZCIsInV1aWQiOiJkODc5ZTI3YS03YjIxLTRkOGQtODA1OS1iNjY4OTZhNDg4NGQiLCJzZXNzaW9uX2lkIjoiOGQ3ZDFjNTktZGZiMC00ZTUxLTk2ZTctNzZjYWIzMGVmMzI5IiwidXNlcm5hbWUiOiJhc2hpc2hiZWRyZSIsInJvbGVzIjpbXSwiZW1haWwiOiJhc2hpc2hiZWRyZTA3QGdtYWlsLmNvbSJ9LCJ1c2VybmFtZSI6ImFzaGlzaGJlZHJlIiwiaXNzIjoiaHR0cHM6XC9cL2FwaS5kb2NrZXIuY29tXC8ifQ.jFYSbsMb7Q6_137dVUbMwoB0FWB7pXC4uN1-caTJCF9cJT3cwszqN-vknQ5EizXVixH-sI7AYRrvH5U63-AVtRl55XluTZIEvD8XlYHs_-nQCkmTgYVJoDSI0BJ-b_j_BHN0iQyOfx8KfHeBlnsg6WqDveneOVBFObGtxJ407GHitc4w9s7buBFUsFF6De9DjMfSvb2T1BJ5Eby7d7YnvzbfSS4T_NSn_8jr0v8OzRFWGJwe7POLVCAWcCzgAFGY75n_BMjnaMOBn_9ZOp6CquXMIYiIL2_pPNim0Err6Efp-N5TyNz4es_vobTYhGOJ1VoLmuNXtjSyZ5Z5qCMjlA";

        repositoryService.fetchAndSaveRepositories(apiUrl, bearerToken);
    }
}
